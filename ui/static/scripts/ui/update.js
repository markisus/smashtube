// Generated by CoffeeScript 1.6.3
(function() {
  require(['../main'], function(main) {
    return require(['ui/chooser/chooser', 'domReady', 'jquery'], function(chooser, domReady, $) {
      return domReady(function() {
        var createTournament;
        console.log("Hello there. This is the main!");
        createTournament = function(latent_tournament) {
          var f;
          f = $.ajax({
            url: '/api/v1/tournament/',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(latent_tournament)
          });
          f.done(function(data) {
            console.log('Done');
            return console.log(data);
          });
          return f.fail(function(jqXHR) {
            if (jqXHR.responseJSON.error_message != null) {
              return console.log("Error", jqXHR.responseJSON.error_message);
            } else {
              return console.log("Unknown error");
            }
          });
        };
        return chooser({
          el: 'tournament-chooser',
          query_url: '/api/v1/tournament/?name__icontains=',
          onSelect: function(e) {
            return console.log('Select', e);
          },
          form_style: 'pure-form pure-form-stacked',
          item_style: 'pure-button pure-button-primary',
          placeholder: 'tournament name',
          legend: 'Create or Choose Tournament',
          allow_new: true,
          onNew: function(e) {
            return createTournament(e);
          },
          allow_input: false
        });
      });
    });
  });

}).call(this);
